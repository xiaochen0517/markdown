# C++指针

## 一、指针的基本概念

**指针的作用**：可以通过指针间接访问内存

- 内存编号是从0开始记录的，一般用十六进制数字表示
- 可以使用指针变量保存地址

## 二、指针变量的定义和使用

- 指针变量定义语法：`数据类型 * 变量名`

- 关联指针变量和变量：`指针变量名 = &变量名`
- 只用指针变量间接访问内存：`*p`

- 示例

```c++
	//定义变量
	int a = 10;
	//定义指针变量
	int * p;
	//关联指针变量以及变量
	p = &a;

	cout << "变量a = " << a << endl;
	cout << "指针变量 p = " << p << endl;

	//修改指针变量指向的内存的数据
	*p = 100;

	cout << "变量a = " << a << endl;
	cout << "指针变量 *p = " << *p << endl;

	/*
	变量a = 10
	指针变量 p = 006FFE28
	变量a = 100
	指针变量 *p = 100
	*/
```

## 三、指针所占用的内存空间

- 在32位系统中，指针变量占用4个字节
- 在64位系统中，指针变量占用8个字节

## 四、空指针和野指针

### 4.1空指针

- 定义：指针变量指向内存中编号为0的空间
- 用途：初始化指针变量
- 注意：空指针指向的内存是不可以访问的

```c++
int * p = NULL;
```

> 0~255之间的内存编号是系统占用的，因此不可以访问

### 4.2野指针

- 定义：指针变量指向非法的内存空间

> 总结：空指针和野指针都不是我们申请的空间，因此不要访问

## 五、`const`修饰指针

- `const`修饰指针有三种情况
  - 修饰指针：常量指针
  - 修饰常量：指针常量
  - 修饰指针又修饰常量

### 5.1常量指针

- 示例

```
const 类型 * 指针名 = 内存地址;
```

- 特点：
  - 指针的指向可以修改
  - 指针指向的值不可以修改

### 5.2指针常量

- 语法

```
类型 * const 指针名 = 内存地址;
```

- 特点：
  - 指针指向不可以改
  - 指针指向的值可以改

### 5.3修饰指针又修饰常量

- 语法

```
const 类型 * const 指针名 = 内存地址;
```

- 特点：
  - 指针指向和指针指向的值都不可以改

## 六、使用指针遍历数组

- 示例

```c++
	int a[10] = { 1,2,3,4,5,6,7,8,9,0 };

	int* p = a;

	for (int i = 0; i < 10; i++)
	{
		cout << "元素--" << *p << endl;
		p++;
	}

	/*
	元素--1
	元素--2
	元素--3
	元素--4
	元素--5
	元素--6
	元素--7
	元素--8
	元素--9
	元素--0
	*/
```

## 七、在函数中使用地址传递

```c++
#include <iostream>
using namespace std;

void test(int* p);

int main() {
	int a = 10;
	test(&a);
	cout << "a--" << a << endl;
	/* a--1000 */
	system("pause");
	return 0;
}

void test(int* p) {
	*p = 1000;
}
```

> 总结：如果不想修改实参使用值传递，如果需要修改实参使用地址传递