# Spring Cloud Hystrix

## 1、概述

`Hystrix` 是一个用于处理分布式系统的延迟和容错的开源库，在分布式系统中许多依赖不可避免的会调用失败，比如超时、异常等， `Hystrix` 能够保证在一个依赖出现问题时，不会导致整体服务的失败，避免级联故障，以提高分布式系统的稳定性。 

### 1.1、服务雪崩

复杂分布式系统结构中的应用程序有数十个依赖关系，每个依赖关系在某些时候将不可避免的失败。

多个微服务之间调用时，服务 `A` 调用 `B` 和 `C` ，服务 `B` 和 `C` 又调用其他的微服务，这就是 ==扇出== 。如果多个扇出的链路上某个微服务的调用响应时间过长或者不可用，对服务 `A` 的调用就会占用越来越多的系统资源，进而引起系统崩溃，就是所谓的雪崩效应。

对于高流量的应用来说，单一的后端依赖可能会导致所有服务器中的资源在几秒钟内饱和。导致服务之间的延迟增加，备份队列，线程和其他系统资源的紧张，导致整个系统发生更多的级联故障。

当发现一个模块的某个实例失败后，这时，这个模块依然还会接收流量，然后这个有问题的模块还调用了其他的模块，这样就会发生级联故障，或者叫雪崩。

### 1.2、断路器

==断路器== 本身是一个开关装置，当某个服务单元发生故障之后，通过断路器的故障监控（类似熔断保险丝），向调用方返回一个符合预期的、可处理的备选响应 `FallBack` ，而不是在长时间的等待或者抛出调用方无法处理的异常，这样就保证了服务调用方的线程不会被长时间、不必要的占用，从而避免了故障在分布式系统中蔓延，乃至雪崩。

### 1.3、可以做什么

- 服务降级
- 服务熔断
- 实时监控
- 服务限流
- 服务隔离

